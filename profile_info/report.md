# PUT
## wrk

Старая реализация

```
./wrk  -c64 -d3m -R2000 -s put.lua --latency http://127.0.0.1:8081
Running 3m test @ http://127.0.0.1:8081
  2 threads and 64 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    46.10ms  308.09ms   3.27s    97.69%
    Req/Sec     1.05k     0.89k   39.78k    97.14%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%    1.67ms
 75.000%    2.06ms
 90.000%    2.64ms
 99.000%    2.17s 
 99.900%    3.03s 
 99.990%    3.18s 
 99.999%    3.21s 
100.000%    3.28s 

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       0.158     0.000000            1         1.00
       1.068     0.100000        34104         1.11
       1.229     0.200000        68012         1.25
       1.387     0.300000       102136         1.43
       1.526     0.400000       135975         1.67
       1.671     0.500000       170002         2.00
       1.744     0.550000       186895         2.22
       1.815     0.600000       203933         2.50
       1.883     0.650000       221025         2.86
       1.958     0.700000       237941         3.33
       2.059     0.750000       254900         4.00
       2.127     0.775000       263435         4.44
       2.213     0.800000       271879         5.00
       2.311     0.825000       280269         5.71
       2.413     0.850000       288746         6.67
       2.519     0.875000       297271         8.00
       2.577     0.887500       301545         8.89
       2.639     0.900000       305780        10.00
       2.703     0.912500       310019        11.43
       2.765     0.925000       314240        13.33
       2.833     0.937500       318557        16.00
       2.865     0.943750       320580        17.78
       2.903     0.950000       322738        20.00
       2.945     0.956250       324875        22.86
       3.001     0.962500       326979        26.67
       3.127     0.968750       329074        32.00
       7.359     0.971875       330125        35.56
      48.575     0.975000       331186        40.00
     564.735     0.978125       332247        45.71
    1074.175     0.981250       333313        53.33
    1564.671     0.984375       334372        64.00
    1820.671     0.985938       334904        71.11
    1960.959     0.987500       335436        80.00
    2088.959     0.989062       335962        91.43
    2217.983     0.990625       336501       106.67
    2342.911     0.992188       337030       128.00
    2404.351     0.992969       337296       142.22
    2467.839     0.993750       337556       160.00
    2533.375     0.994531       337826       182.86
    2596.863     0.995313       338090       213.33
    2660.351     0.996094       338355       256.00
    2689.023     0.996484       338483       284.44
    2721.791     0.996875       338621       320.00
    2754.559     0.997266       338756       365.71
    2807.807     0.997656       338885       426.67
    2871.295     0.998047       339016       512.00
    2902.015     0.998242       339080       568.89
    2934.783     0.998437       339147       640.00
    2967.551     0.998633       339216       731.43
    2998.271     0.998828       339280       853.33
    3031.039     0.999023       339347      1024.00
    3047.423     0.999121       339382      1137.78
    3063.807     0.999219       339415      1280.00
    3078.143     0.999316       339445      1462.86
    3094.527     0.999414       339478      1706.67
    3110.911     0.999512       339513      2048.00
    3119.103     0.999561       339528      2275.56
    3127.295     0.999609       339545      2560.00
    3135.487     0.999658       339563      2925.71
    3143.679     0.999707       339580      3413.33
    3151.871     0.999756       339597      4096.00
    3155.967     0.999780       339604      4551.11
    3160.063     0.999805       339615      5120.00
    3164.159     0.999829       339621      5851.43
    3168.255     0.999854       339629      6826.67
    3174.399     0.999878       339637      8192.00
    3176.447     0.999890       339640      9102.22
    3180.543     0.999902       339647     10240.00
    3182.591     0.999915       339651     11702.86
    3184.639     0.999927       339653     13653.33
    3188.735     0.999939       339659     16384.00
    3188.735     0.999945       339659     18204.44
    3192.831     0.999951       339661     20480.00
    3194.879     0.999957       339664     23405.71
    3196.927     0.999963       339666     27306.67
    3198.975     0.999969       339667     32768.00
    3201.023     0.999973       339668     36408.89
    3205.119     0.999976       339670     40960.00
    3205.119     0.999979       339670     46811.43
    3207.167     0.999982       339671     54613.33
    3209.215     0.999985       339673     65536.00
    3209.215     0.999986       339673     72817.78
    3209.215     0.999988       339673     81920.00
    3213.311     0.999989       339674     93622.86
    3213.311     0.999991       339674    109226.67
    3217.407     0.999992       339675    131072.00
    3217.407     0.999993       339675    145635.56
    3217.407     0.999994       339675    163840.00
    3244.031     0.999995       339676    187245.71
    3244.031     0.999995       339676    218453.33
    3244.031     0.999996       339676    262144.00
    3244.031     0.999997       339676    291271.11
    3244.031     0.999997       339676    327680.00
    3276.799     0.999997       339677    374491.43
    3276.799     1.000000       339677          inf
[Mean    =       46.100, StdDeviation   =      308.086]
[Max     =     3274.752, Total count    =       339677]
[Buckets =           27, SubBuckets     =         2048]
  359873 requests in 3.00m, 22.99MB read
Requests/sec:   1999.29
Transfer/sec:    130.81KB



```

Асинхронная реализация

```
./wrk  -c64 -d3m -R2000 -s put.lua --latency http://127.0.0.1:8081
Running 3m test @ http://127.0.0.1:8081
  2 threads and 64 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency     1.81ms    0.96ms  26.67ms   91.55%
    Req/Sec     1.05k   130.58     2.78k    80.31%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%    1.66ms
 75.000%    2.11ms
 90.000%    2.60ms
 99.000%    4.59ms
 99.900%   13.52ms
 99.990%   18.37ms
 99.999%   22.24ms
100.000%   26.69ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       0.176     0.000000            1         1.00
       1.085     0.100000        33980         1.11
       1.243     0.200000        68095         1.25
       1.382     0.300000       102126         1.43
       1.518     0.400000       136009         1.67
       1.664     0.500000       169926         2.00
       1.738     0.550000       186935         2.22
       1.814     0.600000       203843         2.50
       1.898     0.650000       220948         2.86
       1.996     0.700000       237842         3.33
       2.111     0.750000       254939         4.00
       2.175     0.775000       263349         4.44
       2.245     0.800000       271944         5.00
       2.323     0.825000       280381         5.71
       2.407     0.850000       288843         6.67
       2.501     0.875000       297327         8.00
       2.551     0.887500       301510         8.89
       2.605     0.900000       305874        10.00
       2.661     0.912500       310097        11.43
       2.721     0.925000       314229        13.33
       2.787     0.937500       318448        16.00
       2.825     0.943750       320602        17.78
       2.867     0.950000       322736        20.00
       2.915     0.956250       324901        22.86
       2.969     0.962500       326954        26.67
       3.041     0.968750       329083        32.00
       3.087     0.971875       330124        35.56
       3.143     0.975000       331193        40.00
       3.223     0.978125       332268        45.71
       3.343     0.981250       333308        53.33
       3.559     0.984375       334374        64.00
       3.721     0.985938       334904        71.11
       3.959     0.987500       335432        80.00
       4.307     0.989062       335961        91.43
       4.795     0.990625       336494       106.67
       5.515     0.992188       337025       128.00
       5.979     0.992969       337288       142.22
       6.575     0.993750       337554       160.00
       7.227     0.994531       337819       182.86
       8.047     0.995313       338085       213.33
       8.951     0.996094       338351       256.00
       9.471     0.996484       338482       284.44
       9.935     0.996875       338616       320.00
      10.479     0.997266       338748       365.71
      11.167     0.997656       338880       426.67
      11.775     0.998047       339013       512.00
      12.119     0.998242       339079       568.89
      12.447     0.998437       339146       640.00
      12.855     0.998633       339212       731.43
      13.215     0.998828       339278       853.33
      13.567     0.999023       339345      1024.00
      13.863     0.999121       339378      1137.78
      14.087     0.999219       339412      1280.00
      14.295     0.999316       339444      1462.86
      14.559     0.999414       339478      1706.67
      14.959     0.999512       339512      2048.00
      15.103     0.999561       339529      2275.56
      15.311     0.999609       339544      2560.00
      15.591     0.999658       339561      2925.71
      15.903     0.999707       339577      3413.33
      16.287     0.999756       339594      4096.00
      16.527     0.999780       339604      4551.11
      16.863     0.999805       339610      5120.00
      17.167     0.999829       339618      5851.43
      17.455     0.999854       339627      6826.67
      18.127     0.999878       339635      8192.00
      18.191     0.999890       339639      9102.22
      18.527     0.999902       339643     10240.00
      18.975     0.999915       339647     11702.86
      19.263     0.999927       339652     13653.33
      19.759     0.999939       339657     16384.00
      19.807     0.999945       339658     18204.44
      20.111     0.999951       339660     20480.00
      20.367     0.999957       339662     23405.71
      20.447     0.999963       339664     27306.67
      21.023     0.999969       339666     32768.00
      21.055     0.999973       339667     36408.89
      21.215     0.999976       339668     40960.00
      21.359     0.999979       339669     46811.43
      21.423     0.999982       339670     54613.33
      21.519     0.999985       339671     65536.00
      21.615     0.999986       339672     72817.78
      21.615     0.999988       339672     81920.00
      22.239     0.999989       339673     93622.86
      22.239     0.999991       339673    109226.67
      22.447     0.999992       339674    131072.00
      22.447     0.999993       339674    145635.56
      22.447     0.999994       339674    163840.00
      22.799     0.999995       339675    187245.71
      22.799     0.999995       339675    218453.33
      22.799     0.999996       339675    262144.00
      22.799     0.999997       339675    291271.11
      22.799     0.999997       339675    327680.00
      26.687     0.999997       339676    374491.43
      26.687     1.000000       339676          inf
[Mean    =        1.812, StdDeviation   =        0.957]
[Max     =       26.672, Total count    =       339676]
[Buckets =           27, SubBuckets     =         2048]
  359873 requests in 3.00m, 22.99MB read
Requests/sec:   1999.29
Transfer/sec:    130.81KB


```

Средние показатели близки друг к другу, возможно это связано, с накладными расходами, связанными с дополнительными перемещениями данных между потоками,  на результатх профилирования видны ForkJoinThreads , которые только перенаправляют потоки.
Но на >99 % новая реализация на несколько порядков обгоняет старую, возможно в этот момент очередь и переполнилась и старая реализация замедлилиась.

## CPU
Старая реализация
![image](https://github.com/re1nex/2020-highload-dht/blob/hw6/profile_info/old%20ver/put/cpu.svg)

Асинхронная реализация
![image](https://github.com/re1nex/2020-highload-dht/blob/hw6/profile_info/async/put/cpu.svg)

Количество сэмплов селекторов one.nio уменьшилось до 8%, т.к. теперь еще добавились селекторы HttpClient (11%) . 3% ушло на ForkJoinWorkerThread, внутри которого просто перенаправляются потоки Completablefuture внутри httpclient. На пул экзекьютерова распределено на 7% больше сэмплов, внутри теперь идет распределение на Completablefuture (18%). getTask(26%) , 19% на сетевое взаимодействие нового клиента и всего 8% на разборы запросов ( родительский запрос или локальный, нахождение реплик и т.д.), что существенно отличается от предыдущего этапа.

## ALLOC
Старая реализация
![image](https://github.com/re1nex/2020-highload-dht/blob/hw6/profile_info/old%20ver/put/alloc.svg)

Асинхронная реализация
![image](https://github.com/re1nex/2020-highload-dht/blob/hw6/profile_info/async/put/alloc.svg)

По аллокациям на селекторы уходит на 6% больше,  еще 2% уходит на менеджер селекторов нового клиента, появились новые сэмплы Completablefuture(26%), сэмплов самого сервиса всего 20%.

## LOCK 
Старая реализация
![image](https://github.com/re1nex/2020-highload-dht/blob/hw6/profile_info/old%20ver/put/lock.svg)

Асинхронная реализация
![image](https://github.com/re1nex/2020-highload-dht/blob/hw6/profile_info/async/put/lock.svg)


Тут тоже достаточно координально все поменялось , количество локов селекторов one.nio сократилось до 1%, SelectorManager нового клиента занял 26%, getTask теперь занимает всего 12% , основные расходы на CompatableFuture (27%) и на новый клиент (30%).

# Get
## wrk

Старая реализация
```
./wrk  -c64 -d3m -R2000 -s get.lua --latency http://127.0.0.1:8081
Running 3m test @ http://127.0.0.1:8081
  2 threads and 64 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency    18.83ms  108.28ms   1.16s    97.35%
    Req/Sec     1.06k   172.20     3.22k    92.58%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%    2.24ms
 75.000%    2.65ms
 90.000%    3.25ms
 99.000%  744.45ms
 99.900%    1.10s 
 99.990%    1.14s 
 99.999%    1.15s 
100.000%    1.16s 

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       0.826     0.000000            1         1.00
       1.606     0.100000        34021         1.11
       1.793     0.200000        68046         1.25
       1.950     0.300000       101922         1.43
       2.097     0.400000       136040         1.67
       2.237     0.500000       169991         2.00
       2.309     0.550000       187063         2.22
       2.383     0.600000       204187         2.50
       2.461     0.650000       220936         2.86
       2.549     0.700000       238005         3.33
       2.653     0.750000       255038         4.00
       2.713     0.775000       263378         4.44
       2.783     0.800000       271974         5.00
       2.859     0.825000       280250         5.71
       2.955     0.850000       288810         6.67
       3.075     0.875000       297278         8.00
       3.151     0.887500       301508         8.89
       3.249     0.900000       305797        10.00
       3.379     0.912500       309963        11.43
       3.619     0.925000       314211        13.33
       5.019     0.937500       318450        16.00
       8.095     0.943750       320574        17.78
      12.527     0.950000       322695        20.00
      18.415     0.956250       324823        22.86
      23.791     0.962500       326948        26.67
      35.103     0.968750       329067        32.00
      84.863     0.971875       330126        35.56
     166.015     0.975000       331187        40.00
     237.695     0.978125       332248        45.71
     349.951     0.981250       333310        53.33
     485.375     0.984375       334371        64.00
     554.495     0.985938       334904        71.11
     627.711     0.987500       335435        80.00
     703.999     0.989062       335967        91.43
     770.559     0.990625       336496       106.67
     834.047     0.992188       337029       128.00
     859.647     0.992969       337297       142.22
     883.199     0.993750       337558       160.00
     908.799     0.994531       337826       182.86
     941.055     0.995313       338088       213.33
     976.383     0.996094       338354       256.00
     993.279     0.996484       338485       284.44
    1010.175     0.996875       338617       320.00
    1027.583     0.997266       338750       365.71
    1042.943     0.997656       338883       426.67
    1058.815     0.998047       339023       512.00
    1065.983     0.998242       339084       568.89
    1074.175     0.998437       339151       640.00
    1082.367     0.998633       339217       731.43
    1089.535     0.998828       339280       853.33
    1096.703     0.999023       339348      1024.00
    1100.799     0.999121       339380      1137.78
    1104.895     0.999219       339416      1280.00
    1110.015     0.999316       339454      1462.86
    1113.087     0.999414       339482      1706.67
    1119.231     0.999512       339523      2048.00
    1120.255     0.999561       339529      2275.56
    1123.327     0.999609       339558      2560.00
    1124.351     0.999658       339563      2925.71
    1127.423     0.999707       339585      3413.33
    1129.471     0.999756       339597      4096.00
    1130.495     0.999780       339608      4551.11
    1131.519     0.999805       339615      5120.00
    1133.567     0.999829       339623      5851.43
    1134.591     0.999854       339629      6826.67
    1135.615     0.999878       339637      8192.00
    1136.639     0.999890       339642      9102.22
    1137.663     0.999902       339646     10240.00
    1138.687     0.999915       339651     11702.86
    1140.735     0.999927       339654     13653.33
    1142.783     0.999939       339661     16384.00
    1142.783     0.999945       339661     18204.44
    1143.807     0.999951       339666     20480.00
    1143.807     0.999957       339666     23405.71
    1143.807     0.999963       339666     27306.67
    1145.855     0.999969       339668     32768.00
    1146.879     0.999973       339670     36408.89
    1146.879     0.999976       339670     40960.00
    1147.903     0.999979       339672     46811.43
    1147.903     0.999982       339672     54613.33
    1148.927     0.999985       339674     65536.00
    1148.927     0.999986       339674     72817.78
    1148.927     0.999988       339674     81920.00
    1151.999     0.999989       339675     93622.86
    1151.999     0.999991       339675    109226.67
    1153.023     0.999992       339676    131072.00
    1153.023     0.999993       339676    145635.56
    1153.023     0.999994       339676    163840.00
    1157.119     0.999995       339677    187245.71
    1157.119     0.999995       339677    218453.33
    1157.119     0.999996       339677    262144.00
    1157.119     0.999997       339677    291271.11
    1157.119     0.999997       339677    327680.00
    1160.191     0.999997       339678    374491.43
    1160.191     1.000000       339678          inf
#[Mean    =       18.834, StdDeviation   =      108.279]
#[Max     =     1159.168, Total count    =       339678]
#[Buckets =           27, SubBuckets     =         2048]
  359871 requests in 3.00m, 25.17MB read
Requests/sec:   1999.28
Transfer/sec:    143.17KB

```

Асинхронная реализация
```
./wrk  -c64 -d3m -R2000 -s get.lua --latency http://127.0.0.1:8081
Running 3m test @ http://127.0.0.1:8081
  2 threads and 64 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency     1.72ms  657.10us  19.98ms   76.93%
    Req/Sec     1.05k   108.29     2.22k    77.27%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%    1.65ms
 75.000%    2.02ms
 90.000%    2.48ms
 99.000%    3.37ms
 99.900%    7.62ms
 99.990%   12.43ms
 99.999%   16.61ms
100.000%   20.00ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       0.161     0.000000            1         1.00
       1.051     0.100000        33974         1.11
       1.212     0.200000        67975         1.25
       1.361     0.300000       101948         1.43
       1.504     0.400000       135941         1.67
       1.648     0.500000       169969         2.00
       1.720     0.550000       187045         2.22
       1.790     0.600000       203943         2.50
       1.859     0.650000       220818         2.86
       1.934     0.700000       237989         3.33
       2.017     0.750000       254760         4.00
       2.069     0.775000       263408         4.44
       2.127     0.800000       272012         5.00
       2.195     0.825000       280385         5.71
       2.275     0.850000       288802         6.67
       2.371     0.875000       297250         8.00
       2.425     0.887500       301540         8.89
       2.483     0.900000       305725        10.00
       2.549     0.912500       310016        11.43
       2.621     0.925000       314288        13.33
       2.697     0.937500       318522        16.00
       2.739     0.943750       320637        17.78
       2.783     0.950000       322741        20.00
       2.829     0.956250       324883        22.86
       2.881     0.962500       327010        26.67
       2.935     0.968750       329077        32.00
       2.967     0.971875       330145        35.56
       3.005     0.975000       331237        40.00
       3.047     0.978125       332255        45.71
       3.095     0.981250       333326        53.33
       3.159     0.984375       334381        64.00
       3.201     0.985938       334911        71.11
       3.251     0.987500       335438        80.00
       3.319     0.989062       335976        91.43
       3.413     0.990625       336499       106.67
       3.585     0.992188       337025       128.00
       3.751     0.992969       337293       142.22
       3.985     0.993750       337561       160.00
       4.271     0.994531       337822       182.86
       4.575     0.995313       338091       213.33
       4.903     0.996094       338355       256.00
       5.087     0.996484       338485       284.44
       5.319     0.996875       338621       320.00
       5.547     0.997266       338750       365.71
       5.851     0.997656       338884       426.67
       6.183     0.998047       339015       512.00
       6.451     0.998242       339081       568.89
       6.743     0.998437       339148       640.00
       6.987     0.998633       339214       731.43
       7.275     0.998828       339280       853.33
       7.671     0.999023       339348      1024.00
       7.903     0.999121       339380      1137.78
       8.127     0.999219       339413      1280.00
       8.455     0.999316       339447      1462.86
       8.783     0.999414       339479      1706.67
       9.047     0.999512       339514      2048.00
       9.183     0.999561       339531      2275.56
       9.343     0.999609       339546      2560.00
       9.607     0.999658       339562      2925.71
       9.855     0.999707       339579      3413.33
      10.151     0.999756       339596      4096.00
      10.439     0.999780       339604      4551.11
      10.679     0.999805       339612      5120.00
      10.951     0.999829       339620      5851.43
      11.399     0.999854       339629      6826.67
      11.807     0.999878       339637      8192.00
      12.127     0.999890       339641      9102.22
      12.439     0.999902       339645     10240.00
      12.567     0.999915       339649     11702.86
      13.175     0.999927       339654     13653.33
      13.399     0.999939       339658     16384.00
      13.487     0.999945       339660     18204.44
      14.151     0.999951       339662     20480.00
      14.391     0.999957       339664     23405.71
      14.447     0.999963       339666     27306.67
      14.631     0.999969       339668     32768.00
      14.807     0.999973       339669     36408.89
      15.023     0.999976       339670     40960.00
      15.615     0.999979       339671     46811.43
      15.695     0.999982       339672     54613.33
      16.143     0.999985       339673     65536.00
      16.447     0.999986       339674     72817.78
      16.447     0.999988       339674     81920.00
      16.607     0.999989       339675     93622.86
      16.607     0.999991       339675    109226.67
      16.879     0.999992       339676    131072.00
      16.879     0.999993       339676    145635.56
      16.879     0.999994       339676    163840.00
      17.791     0.999995       339677    187245.71
      17.791     0.999995       339677    218453.33
      17.791     0.999996       339677    262144.00
      17.791     0.999997       339677    291271.11
      17.791     0.999997       339677    327680.00
      19.999     0.999997       339678    374491.43
      19.999     1.000000       339678          inf
[Mean    =        1.724, StdDeviation   =        0.657]
[Max     =       19.984, Total count    =       339678]
[Buckets =           27, SubBuckets     =         2048]
  359874 requests in 3.00m, 25.17MB read
Requests/sec:   1999.30
Transfer/sec:    143.17KB

```
В среднем новая реализация обгоняет старую в 1,6 раза.
на 99% разница увеличивается на порядки и новая реализация почти в 200 раз быстрее
на 99,9% разница увеличивается еше больше 

## CPU
Старая реализация
![image](https://github.com/re1nex/2020-highload-dht/blob/hw6/profile_info/old%20ver/get/cpu.svg)

Асинхронная реализация
![image](https://github.com/re1nex/2020-highload-dht/blob/hw6/profile_info/async/get/cpu.svg)

Распределение сэмплов на селектор one.nio и менеджер селекторов java.net на 10% больше того , сколько раньше было распеделено на селекторы. Появились новые сэмплы  ForkJoinWorker (4%) . На сам метод get количество уменьшилось до 5% . Количество сэмплов сервиса (распределение запросов, поиск нод в топологии и т.д.) уменьшилось в несколько раз. Появились новые сэмплы относящиеся к Completablefuture (20%) и к новому клиенту (21%).

## ALLOC
Старая реализация
![image](https://github.com/re1nex/2020-highload-dht/blob/hw6/profile_info/old%20ver/get/alloc.svg)

Асинхронная реализация
![image](https://github.com/re1nex/2020-highload-dht/blob/hw6/profile_info/async/get/alloc.svg)

На селекторы количество сэмплов на 13% больше. На сам запрос к dao  расход почти такой же. Добавились новые расходы на Completablefuture (30%) и новый клиент (8%) , распределение сэмплов на сервис также уменьшилось в несколько раз.

## LOCK 
Старая реализация
![image](https://github.com/re1nex/2020-highload-dht/blob/hw6/profile_info/old%20ver/get/lock.svg)

Асинхронная реализация
![image](https://github.com/re1nex/2020-highload-dht/blob/hw6/profile_info/async/get/lock.svg)

Появились локи java.net SelectorManager(14%). Количество локов связанных c get из dao почти не изменилось. Появились дополнительные локи связанные с фьючами (31%) и новым клиентом (40%).

