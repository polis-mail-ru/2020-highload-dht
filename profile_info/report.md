# PUT
## wrk

Реализация без репликации

```
./wrk  -c64 -d3m -R2000 -s put.lua --latency http://127.0.0.1:8081
Running 3m test @ http://127.0.0.1:8081
  2 threads and 64 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency     1.31ms  609.39us  27.17ms   76.43%
    Req/Sec     1.05k    92.63     3.56k    83.88%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%    1.26ms
 75.000%    1.64ms
 90.000%    1.97ms
 99.000%    2.60ms
 99.900%    5.61ms
 99.990%   14.73ms
 99.999%   26.03ms
100.000%   27.18ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       0.086     0.000000            1         1.00
       0.656     0.100000        34004         1.11
       0.841     0.200000        68083         1.25
       0.987     0.300000       102023         1.43
       1.123     0.400000       136019         1.67
       1.256     0.500000       170021         2.00
       1.326     0.550000       186983         2.22
       1.398     0.600000       203809         2.50
       1.472     0.650000       220916         2.86
       1.551     0.700000       237858         3.33
       1.639     0.750000       254822         4.00
       1.686     0.775000       263251         4.44
       1.735     0.800000       271752         5.00
       1.788     0.825000       280291         5.71
       1.843     0.850000       288758         6.67
       1.902     0.875000       297297         8.00
       1.935     0.887500       301549         8.89
       1.974     0.900000       305751        10.00
       2.023     0.912500       309962        11.43
       2.083     0.925000       314239        13.33
       2.155     0.937500       318467        16.00
       2.197     0.943750       320588        17.78
       2.243     0.950000       322750        20.00
       2.293     0.956250       324880        22.86
       2.345     0.962500       326995        26.67
       2.395     0.968750       329081        32.00
       2.421     0.971875       330211        35.56
       2.445     0.975000       331195        40.00
       2.475     0.978125       332321        45.71
       2.503     0.981250       333313        53.33
       2.535     0.984375       334384        64.00
       2.553     0.985938       334935        71.11
       2.569     0.987500       335437        80.00
       2.589     0.989062       335994        91.43
       2.611     0.990625       336504       106.67
       2.635     0.992188       337026       128.00
       2.649     0.992969       337309       142.22
       2.665     0.993750       337581       160.00
       2.681     0.994531       337827       182.86
       2.705     0.995313       338097       213.33
       2.729     0.996094       338355       256.00
       2.747     0.996484       338486       284.44
       2.769     0.996875       338623       320.00
       2.793     0.997266       338758       365.71
       2.823     0.997656       338884       426.67
       2.879     0.998047       339018       512.00
       2.919     0.998242       339084       568.89
       3.003     0.998437       339148       640.00
       3.213     0.998633       339214       731.43
       4.159     0.998828       339281       853.33
       5.843     0.999023       339347      1024.00
       6.627     0.999121       339380      1137.78
       7.435     0.999219       339413      1280.00
       8.311     0.999316       339446      1462.86
       9.255     0.999414       339479      1706.67
      10.471     0.999512       339513      2048.00
      11.047     0.999561       339529      2275.56
      11.511     0.999609       339546      2560.00
      11.879     0.999658       339562      2925.71
      12.351     0.999707       339580      3413.33
      12.791     0.999756       339596      4096.00
      13.159     0.999780       339604      4551.11
      13.391     0.999805       339612      5120.00
      13.815     0.999829       339620      5851.43
      13.935     0.999854       339629      6826.67
      14.311     0.999878       339637      8192.00
      14.655     0.999890       339641      9102.22
      15.103     0.999902       339645     10240.00
      15.639     0.999915       339649     11702.86
      16.655     0.999927       339654     13653.33
      18.095     0.999939       339658     16384.00
      18.367     0.999945       339660     18204.44
      20.111     0.999951       339662     20480.00
      20.639     0.999957       339664     23405.71
      21.679     0.999963       339666     27306.67
      23.199     0.999969       339668     32768.00
      23.215     0.999973       339669     36408.89
      23.807     0.999976       339670     40960.00
      23.855     0.999979       339671     46811.43
      25.487     0.999982       339672     54613.33
      25.615     0.999985       339673     65536.00
      25.679     0.999986       339674     72817.78
      25.679     0.999988       339674     81920.00
      26.031     0.999989       339675     93622.86
      26.031     0.999991       339675    109226.67
      26.063     0.999992       339676    131072.00
      26.063     0.999993       339676    145635.56
      26.063     0.999994       339676    163840.00
      26.463     0.999995       339677    187245.71
      26.463     0.999995       339677    218453.33
      26.463     0.999996       339677    262144.00
      26.463     0.999997       339677    291271.11
      26.463     0.999997       339677    327680.00
      27.183     0.999997       339678    374491.43
      27.183     1.000000       339678          inf
[Mean    =        1.308, StdDeviation   =        0.609]
[Max     =       27.168, Total count    =       339678]
[Buckets =           27, SubBuckets     =         2048]

  359876 requests in 3.00m, 27.53MB read
Requests/sec:   1999.31
Transfer/sec:    156.62KB
```

Реализация c репликацией

```
./wrk  -c64 -d3m -R2000 -s put.lua --latency http://127.0.0.1:8081
Running 3m test @ http://127.0.0.1:8081
  2 threads and 64 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency     1.69ms  798.46us  21.71ms   85.39%
    Req/Sec     1.05k   114.68     2.89k    82.46%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%    1.61ms
 75.000%    1.98ms
 90.000%    2.49ms
 99.000%    3.00ms
 99.900%   12.83ms
 99.990%   17.14ms
 99.999%   20.06ms
100.000%   21.73ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       0.119     0.000000            1         1.00
       1.018     0.100000        34008         1.11
       1.170     0.200000        67939         1.25
       1.319     0.300000       102096         1.43
       1.468     0.400000       135886         1.67
       1.607     0.500000       170073         2.00
       1.672     0.550000       186832         2.22
       1.739     0.600000       203987         2.50
       1.808     0.650000       220908         2.86
       1.883     0.700000       237792         3.33
       1.976     0.750000       254912         4.00
       2.032     0.775000       263277         4.44
       2.099     0.800000       271940         5.00
       2.175     0.825000       280280         5.71
       2.267     0.850000       288836         6.67
       2.373     0.875000       297318         8.00
       2.429     0.887500       301526         8.89
       2.487     0.900000       305733        10.00
       2.545     0.912500       310004        11.43
       2.601     0.925000       314238        13.33
       2.659     0.937500       318458        16.00
       2.689     0.943750       320613        17.78
       2.719     0.950000       322713        20.00
       2.751     0.956250       324821        22.86
       2.783     0.962500       326958        26.67
       2.817     0.968750       329073        32.00
       2.835     0.971875       330157        35.56
       2.855     0.975000       331250        40.00
       2.877     0.978125       332313        45.71
       2.901     0.981250       333405        53.33
       2.927     0.984375       334383        64.00
       2.943     0.985938       334917        71.11
       2.961     0.987500       335468        80.00
       2.983     0.989062       336005        91.43
       3.007     0.990625       336525       106.67
       3.041     0.992188       337035       128.00
       3.065     0.992969       337303       142.22
       3.095     0.993750       337571       160.00
       3.149     0.994531       337821       182.86
       3.459     0.995313       338085       213.33
       4.875     0.996094       338352       256.00
       5.743     0.996484       338485       284.44
       6.679     0.996875       338616       320.00
       7.675     0.997266       338749       365.71
       8.831     0.997656       338881       426.67
      10.023     0.998047       339015       512.00
      10.679     0.998242       339081       568.89
      11.263     0.998437       339147       640.00
      11.975     0.998633       339213       731.43
      12.359     0.998828       339281       853.33
      12.919     0.999023       339346      1024.00
      13.175     0.999121       339379      1137.78
      13.591     0.999219       339412      1280.00
      14.039     0.999316       339445      1462.86
      14.439     0.999414       339479      1706.67
      14.911     0.999512       339512      2048.00
      15.135     0.999561       339528      2275.56
      15.479     0.999609       339545      2560.00
      15.719     0.999658       339561      2925.71
      15.959     0.999707       339578      3413.33
      16.175     0.999756       339595      4096.00
      16.415     0.999780       339605      4551.11
      16.559     0.999805       339612      5120.00
      16.639     0.999829       339619      5851.43
      16.815     0.999854       339628      6826.67
      16.991     0.999878       339636      8192.00
      17.055     0.999890       339640      9102.22
      17.183     0.999902       339644     10240.00
      17.407     0.999915       339649     11702.86
      17.679     0.999927       339653     13653.33
      17.951     0.999939       339657     16384.00
      17.999     0.999945       339659     18204.44
      18.239     0.999951       339661     20480.00
      18.351     0.999957       339663     23405.71
      18.399     0.999963       339665     27306.67
      18.543     0.999969       339667     32768.00
      18.687     0.999973       339668     36408.89
      18.799     0.999976       339669     40960.00
      18.943     0.999979       339670     46811.43
      18.959     0.999982       339671     54613.33
      19.359     0.999985       339672     65536.00
      19.903     0.999986       339673     72817.78
      19.903     0.999988       339673     81920.00
      20.063     0.999989       339674     93622.86
      20.063     0.999991       339674    109226.67
      20.239     0.999992       339675    131072.00
      20.239     0.999993       339675    145635.56
      20.239     0.999994       339675    163840.00
      20.319     0.999995       339676    187245.71
      20.319     0.999995       339676    218453.33
      20.319     0.999996       339676    262144.00
      20.319     0.999997       339676    291271.11
      20.319     0.999997       339676    327680.00
      21.727     0.999997       339677    374491.43
      21.727     1.000000       339677          inf
[Mean    =        1.689, StdDeviation   =        0.798]
[Max     =       21.712, Total count    =       339677]
[Buckets =           27, SubBuckets     =         2048]
  359874 requests in 3.00m, 23.00MB read
Requests/sec:   1999.30
Transfer/sec:    130.82KB
```

По средним показателяи новая реализация в 1,3 раза медленнее, т.к. запись происходит сразу на несколько нод , а не просто переадресация как в случае старой реализации.На 99% и 99,9% разрыв начинает уменьшаться, но реализация без репликации все еще быстрее,а на 99.999% уже начинает обгонять, скорее всего в это время началась сборка мусора у старой реализации, поэтому показатели просели. 

## CPU
Реализация без репликации
![image](https://github.com/re1nex/2020-highload-dht/blob/hw5/profile_info/old%20ver/put/cpu.svg)

Реализация c репликацией
![image](https://github.com/re1nex/2020-highload-dht/blob/hw5/profile_info/with%20replica/put/cpu.svg)

Количество сэмплов относящихся к сервису увеличилось на 6 %. 28 % занимает управление репликами (их переадресация на другие ноды, вставка в локальное хранилище) 12 % занимают запросы от родительской ноды.

## ALLOC
Реализация без репликации
![image](https://github.com/re1nex/2020-highload-dht/blob/hw5/profile_info/old%20ver/put/alloc.svg)

Реализация c репликацией
![image](https://github.com/re1nex/2020-highload-dht/blob/hw5/profile_info/with%20replica/put/alloc.svg)

По аллокациям в новой реализации уходит больше на селекторы (на 10%), это связано с тем, что каждый запрос по сути включает в себя еще 2 дополнительных на реплики, а в случае старой реализации всего 1 запрос на нужную ноду. Уменьшился общий вклад HttpClient.invoke, т.к. появилось большое число синхронных запросов, которые тоже достаточно ресурсоемкие.

## LOCK 
Реализация без репликации
![image](https://github.com/re1nex/2020-highload-dht/blob/hw5/profile_info/old%20ver/put/lock.svg)

Реализация c репликацией
![image](https://github.com/re1nex/2020-highload-dht/blob/hw5/profile_info/with%20replica/put/lock.svg)


Количество сэмплов селекторов берущих задачи под локами увеличилось, что было ожидаемо, т.к. больше дополнительных запросов приходится обрабатывать

# Get
## wrk

Реализация без репликации
```
./wrk  -c64 -d5m -R2000 -s get.lua --latency http://127.0.0.1:8081
Running 5m test @ http://127.0.0.1:8081
  2 threads and 64 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency     1.27ms  676.76us   9.16ms   70.72%
    Req/Sec     1.05k     1.04k    3.56k    54.39%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%    1.17ms
 75.000%    1.64ms
 90.000%    2.17ms
 99.000%    2.92ms
 99.900%    4.15ms
 99.990%    6.01ms
 99.999%    6.96ms
100.000%    9.17ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       0.060     0.000000            1         1.00
       0.498     0.100000        58156         1.11
       0.697     0.200000       116190         1.25
       0.868     0.300000       174074         1.43
       1.019     0.400000       232011         1.67
       1.174     0.500000       290179         2.00
       1.252     0.550000       318955         2.22
       1.338     0.600000       348041         2.50
       1.429     0.650000       376909         2.86
       1.527     0.700000       405956         3.33
       1.637     0.750000       434955         4.00
       1.700     0.775000       449445         4.44
       1.770     0.800000       463894         5.00
       1.847     0.825000       478304         5.71
       1.934     0.850000       492825         6.67
       2.039     0.875000       507302         8.00
       2.101     0.887500       514619         8.89
       2.171     0.900000       521830        10.00
       2.247     0.912500       529028        11.43
       2.337     0.925000       536337        13.33
       2.437     0.937500       543440        16.00
       2.497     0.943750       547159        17.78
       2.559     0.950000       550734        20.00
       2.629     0.956250       554332        22.86
       2.713     0.962500       557986        26.67
       2.811     0.968750       561579        32.00
       2.867     0.971875       563391        35.56
       2.927     0.975000       565230        40.00
       2.989     0.978125       567024        45.71
       3.059     0.981250       568813        53.33
       3.143     0.984375       570633        64.00
       3.191     0.985938       571531        71.11
       3.245     0.987500       572438        80.00
       3.301     0.989062       573324        91.43
       3.373     0.990625       574250       106.67
       3.453     0.992188       575138       128.00
       3.503     0.992969       575598       142.22
       3.563     0.993750       576056       160.00
       3.619     0.994531       576501       182.86
       3.685     0.995313       576958       213.33
       3.759     0.996094       577409       256.00
       3.797     0.996484       577634       284.44
       3.841     0.996875       577859       320.00
       3.881     0.997266       578083       365.71
       3.929     0.997656       578313       426.67
       3.979     0.998047       578533       512.00
       4.007     0.998242       578649       568.89
       4.031     0.998437       578760       640.00
       4.069     0.998633       578880       731.43
       4.107     0.998828       578990       853.33
       4.155     0.999023       579105      1024.00
       4.187     0.999121       579158      1137.78
       4.215     0.999219       579212      1280.00
       4.251     0.999316       579273      1462.86
       4.291     0.999414       579330      1706.67
       4.379     0.999512       579381      2048.00
       4.419     0.999561       579411      2275.56
       4.475     0.999609       579439      2560.00
       4.563     0.999658       579466      2925.71
       4.699     0.999707       579496      3413.33
       4.859     0.999756       579523      4096.00
       5.051     0.999780       579537      4551.11
       5.267     0.999805       579551      5120.00
       5.459     0.999829       579566      5851.43
       5.647     0.999854       579580      6826.67
       5.879     0.999878       579594      8192.00
       5.979     0.999890       579601      9102.22
       6.015     0.999902       579608     10240.00
       6.115     0.999915       579615     11702.86
       6.235     0.999927       579622     13653.33
       6.403     0.999939       579629     16384.00
       6.499     0.999945       579633     18204.44
       6.531     0.999951       579636     20480.00
       6.591     0.999957       579641     23405.71
       6.659     0.999963       579643     27306.67
       6.715     0.999969       579647     32768.00
       6.811     0.999973       579649     36408.89
       6.815     0.999976       579650     40960.00
       6.843     0.999979       579652     46811.43
       6.915     0.999982       579654     54613.33
       6.919     0.999985       579656     65536.00
       6.947     0.999986       579657     72817.78
       6.947     0.999988       579657     81920.00
       6.959     0.999989       579658     93622.86
       7.267     0.999991       579659    109226.67
       8.655     0.999992       579660    131072.00
       8.927     0.999993       579661    145635.56
       8.927     0.999994       579661    163840.00
       8.927     0.999995       579661    187245.71
       8.935     0.999995       579662    218453.33
       8.935     0.999996       579662    262144.00
       8.999     0.999997       579663    291271.11
       8.999     0.999997       579663    327680.00
       8.999     0.999997       579663    374491.43
       8.999     0.999998       579663    436906.67
       8.999     0.999998       579663    524288.00
       9.167     0.999998       579664    582542.22
       9.167     1.000000       579664          inf
[Mean    =        1.275, StdDeviation   =        0.677]
[Max     =        9.160, Total count    =       579664]
[Buckets =           27, SubBuckets     =         2048]
  598949 requests in 5.00m, 45.43MB read

Requests/sec:   1996.44
Transfer/sec:    155.08KB
```

Реализация с репликацией
```
./wrk  -c64 -d5m -R2000 -s get.lua --latency http://127.0.0.1:8081
Running 5m test @ http://127.0.0.1:8081
  2 threads and 64 connections
  Thread Stats   Avg      Stdev     Max   +/- Stdev
    Latency     1.58ms  552.50us  12.79ms   71.86%
    Req/Sec     1.03k    96.68     2.00k    75.02%
  Latency Distribution (HdrHistogram - Recorded Latency)
 50.000%    1.55ms
 75.000%    1.89ms
 90.000%    2.30ms
 99.000%    3.34ms
 99.900%    4.16ms
 99.990%    8.89ms
 99.999%   11.49ms
100.000%   12.80ms

  Detailed Percentile spectrum:
       Value   Percentile   TotalCount 1/(1-Percentile)

       0.137     0.000000            1         1.00
       0.956     0.100000        56958         1.11
       1.119     0.200000       113456         1.25
       1.266     0.300000       170412         1.43
       1.414     0.400000       227089         1.67
       1.554     0.500000       283593         2.00
       1.622     0.550000       312337         2.22
       1.685     0.600000       340560         2.50
       1.748     0.650000       368946         2.86
       1.814     0.700000       397183         3.33
       1.889     0.750000       425648         4.00
       1.932     0.775000       439807         4.44
       1.981     0.800000       453851         5.00
       2.039     0.825000       468168         5.71
       2.107     0.850000       482261         6.67
       2.191     0.875000       496290         8.00
       2.243     0.887500       503404         8.89
       2.303     0.900000       510644        10.00
       2.369     0.912500       517641        11.43
       2.443     0.925000       524704        13.33
       2.521     0.937500       531734        16.00
       2.563     0.943750       535278        17.78
       2.605     0.950000       538963        20.00
       2.645     0.956250       542530        22.86
       2.685     0.962500       545989        26.67
       2.725     0.968750       549466        32.00
       2.749     0.971875       551365        35.56
       2.775     0.975000       553113        40.00
       2.797     0.978125       554788        45.71
       2.825     0.981250       556664        53.33
       2.857     0.984375       558328        64.00
       2.873     0.985938       559213        71.11
       2.893     0.987500       560188        80.00
       2.911     0.989062       561050        91.43
       2.933     0.990625       561917       106.67
       2.961     0.992188       562777       128.00
       2.975     0.992969       563212       142.22
       2.993     0.993750       563667       160.00
       3.013     0.994531       564101       182.86
       3.041     0.995313       564541       213.33
       3.073     0.996094       564985       256.00
       3.091     0.996484       565208       284.44
       3.115     0.996875       565415       320.00
       3.149     0.997266       565638       365.71
       3.201     0.997656       565860       426.67
       3.323     0.998047       566073       512.00
       3.477     0.998242       566186       568.89
       3.621     0.998437       566294       640.00
       3.789     0.998633       566405       731.43
       3.957     0.998828       566516       853.33
       4.191     0.999023       566627      1024.00
       4.343     0.999121       566684      1137.78
       4.471     0.999219       566738      1280.00
       4.639     0.999316       566795      1462.86
       4.935     0.999414       566849      1706.67
       5.343     0.999512       566905      2048.00
       5.547     0.999561       566932      2275.56
       5.803     0.999609       566959      2560.00
       6.091     0.999658       566987      2925.71
       6.507     0.999707       567014      3413.33
       6.839     0.999756       567042      4096.00
       7.139     0.999780       567056      4551.11
       7.459     0.999805       567070      5120.00
       7.671     0.999829       567084      5851.43
       8.039     0.999854       567097      6826.67
       8.503     0.999878       567111      8192.00
       8.711     0.999890       567118      9102.22
       8.975     0.999902       567125     10240.00
       9.183     0.999915       567132     11702.86
       9.375     0.999927       567139     13653.33
       9.663     0.999939       567146     16384.00
       9.799     0.999945       567149     18204.44
       9.895     0.999951       567153     20480.00
       9.927     0.999957       567156     23405.71
      10.207     0.999963       567160     27306.67
      10.367     0.999969       567163     32768.00
      10.511     0.999973       567165     36408.89
      10.623     0.999976       567167     40960.00
      10.775     0.999979       567168     46811.43
      10.815     0.999982       567170     54613.33
      11.263     0.999985       567172     65536.00
      11.375     0.999986       567173     72817.78
      11.495     0.999988       567174     81920.00
      11.495     0.999989       567174     93622.86
      11.575     0.999991       567175    109226.67
      11.615     0.999992       567176    131072.00
      11.663     0.999993       567177    145635.56
      11.663     0.999994       567177    163840.00
      11.663     0.999995       567177    187245.71
      12.487     0.999995       567178    218453.33
      12.487     0.999996       567178    262144.00
      12.751     0.999997       567179    291271.11
      12.751     0.999997       567179    327680.00
      12.751     0.999997       567179    374491.43
      12.751     0.999998       567179    436906.67
      12.751     0.999998       567179    524288.00
      12.799     0.999998       567180    582542.22
      12.799     1.000000       567180          inf
[Mean    =        1.583, StdDeviation   =        0.553]
[Max     =       12.792, Total count    =       567180]
[Buckets =           27, SubBuckets     =         2048]
  587376 requests in 5.00m, 40.14MB read
  Socket errors: connect 0, read 0, write 0, timeout 198
Requests/sec:   1957.91
Transfer/sec:    137.00KB
```
На 50 % новая реализация в 1,3 раза медленнее , на 99% разница становится меньше , новая реализия в 1,1 раза медленее, а на 99,9% значения очень близки, скорее всего связано со сборкой мусора или тем, что обе очереди уже были заполнены максимально.

## CPU
Реализация без репликации
![image](https://github.com/re1nex/2020-highload-dht/blob/hw5/profile_info/old%20ver/get/cpu.svg)

Реализация c репликацией
![image](https://github.com/re1nex/2020-highload-dht/blob/hw5/profile_info/with%20replica/get/cpu.svg)

Больше сэмплов относящихся к сервису (на 10 %), что ожидаемо т.к. больше запросов нужно обрабатывать. 27%  занимает управление репликами (их переадресация на другие ноды, вставка в локальное хранилище) 12 % занимают запросы от родительской ноды.

## ALLOC
Реализация без репликации
![image](https://github.com/re1nex/2020-highload-dht/blob/hw5/profile_info/old%20ver/get/alloc.svg)

Реализация c репликацией
![image](https://github.com/re1nex/2020-highload-dht/blob/hw5/profile_info/with%20replica/get/alloc.svg)

На 20% больше аллокаций относящихся к сервису, 30% запросы от родительской ноды и 34 % на управление репликами (переадресация, вставка в локальное хранилище)).

Реализация без репликации
![image](https://github.com/re1nex/2020-highload-dht/blob/hw5/profile_info/old%20ver/get/heap.png)

Реализация c репликацией
![image](https://github.com/re1nex/2020-highload-dht/blob/hw5/profile_info/with%20replica/get/heap.png)

По данным из Visual VM видно, что новая реализация более ресурсо затратна в плане памяти, количество MB постоянно находящихся в памяти в 2 раза больше.

## LOCK 
Реализация без репликации
![image](https://github.com/re1nex/2020-highload-dht/blob/hw5/profile_info/old%20ver/get/lock.svg)

Реализация c репликацией
![image](https://github.com/re1nex/2020-highload-dht/blob/hw5/profile_info/with%20replica/get/lock.svg)


Стало больше локов у ThreadPoolExecutor, скорее всего это связано с увеличенной нагрузкой.
